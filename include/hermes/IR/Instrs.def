/*
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

#ifndef DEF_VALUE
#define DEF_VALUE(NAME, PARENT)
#endif
#ifndef MARK_FIRST
#define MARK_FIRST(NAME, PARENT)
#endif
#ifndef MARK_LAST
#define MARK_LAST(NAME)
#endif

#ifndef TERMINATOR
#define TERMINATOR(NAME, PARENT) DEF_VALUE(NAME, PARENT)
#endif

#if defined(INCLUDE_ALL_INSTRS) || defined(INCLUDE_HBC_INSTRS)
#define INCLUDE_HBC_BACKEND
#endif

DEF_VALUE(AddEmptyStringInst, Instruction)
DEF_VALUE(AsNumberInst, Instruction)
DEF_VALUE(AsNumericInst, Instruction)
DEF_VALUE(AsInt32Inst, Instruction)
DEF_VALUE(LoadStackInst, Instruction)
DEF_VALUE(MovInst, Instruction)
DEF_VALUE(ImplicitMovInst, Instruction)
DEF_VALUE(CoerceThisNSInst, Instruction)
DEF_VALUE(UnaryOperatorInst, Instruction)
DEF_VALUE(DirectEvalInst, Instruction)
DEF_VALUE(LoadFrameInst, Instruction)
#ifdef INCLUDE_HBC_BACKEND
DEF_VALUE(HBCLoadConstInst, Instruction)
DEF_VALUE(HBCLoadParamInst, Instruction)
DEF_VALUE(HBCResolveEnvironment, Instruction)
DEF_VALUE(HBCGetArgumentsLengthInst, Instruction)

MARK_FIRST(HBCReifyArgumentsInst, Instruction)
DEF_VALUE(HBCReifyArgumentsStrictInst, HBCReifyArgumentsInst)
DEF_VALUE(HBCReifyArgumentsLooseInst, HBCReifyArgumentsInst)
MARK_LAST(HBCReifyArgumentsInst)

DEF_VALUE(HBCSpillMovInst, Instruction)
#endif

DEF_VALUE(PhiInst, Instruction)
DEF_VALUE(BinaryOperatorInst, Instruction)

MARK_FIRST(BaseStorePropertyInst, Instruction)
DEF_VALUE(StorePropertyInst, BaseStorePropertyInst)
DEF_VALUE(TryStoreGlobalPropertyInst, BaseStorePropertyInst)
MARK_LAST(BaseStorePropertyInst)

MARK_FIRST(BaseStoreOwnPropertyInst, Instruction)
DEF_VALUE(StoreOwnPropertyInst, BaseStoreOwnPropertyInst)
DEF_VALUE(StoreNewOwnPropertyInst, BaseStoreOwnPropertyInst)
MARK_LAST(BaseStoreOwnPropertyInst)

DEF_VALUE(StoreGetterSetterInst, Instruction)
DEF_VALUE(DeletePropertyInst, Instruction)

MARK_FIRST(BaseLoadPropertyInst, Instruction)
DEF_VALUE(LoadPropertyInst, BaseLoadPropertyInst)
DEF_VALUE(TryLoadGlobalPropertyInst, BaseLoadPropertyInst)
MARK_LAST(BaseLoadPropertyInst)

DEF_VALUE(StoreStackInst, Instruction)
DEF_VALUE(StoreFrameInst, Instruction)
DEF_VALUE(AllocStackInst, Instruction)
DEF_VALUE(AllocObjectInst, Instruction)
DEF_VALUE(AllocArrayInst, Instruction)
DEF_VALUE(AllocObjectLiteralInst, Instruction)
DEF_VALUE(CreateArgumentsInst, Instruction)
DEF_VALUE(CatchInst, Instruction)
DEF_VALUE(DebuggerInst, Instruction)
DEF_VALUE(CreateRegExpInst, Instruction)
DEF_VALUE(TryEndInst, Instruction)
DEF_VALUE(GetNewTargetInst, Instruction)
DEF_VALUE(ThrowIfEmptyInst, Instruction)
DEF_VALUE(IteratorBeginInst, Instruction)
DEF_VALUE(IteratorNextInst, Instruction)
DEF_VALUE(IteratorCloseInst, Instruction)
#ifdef INCLUDE_HBC_BACKEND
DEF_VALUE(HBCStoreToEnvironmentInst, Instruction)
DEF_VALUE(HBCLoadFromEnvironmentInst, Instruction)
#endif
DEF_VALUE(UnreachableInst, Instruction)

MARK_FIRST(BaseCreateLexicalChildInst, Instruction)

MARK_FIRST(BaseCreateCallableInst, BaseCreateLexicalChildInst)
DEF_VALUE(CreateFunctionInst, BaseCreateCallableInst)
#ifdef INCLUDE_HBC_BACKEND
DEF_VALUE(HBCCreateFunctionInst, BaseCreateCallableInst)
#endif
MARK_LAST(BaseCreateCallableInst)

DEF_VALUE(CreateGeneratorInst, BaseCreateLexicalChildInst)
#ifdef INCLUDE_HBC_BACKEND
DEF_VALUE(HBCCreateGeneratorInst, BaseCreateLexicalChildInst)
#endif
MARK_LAST(BaseCreateLexicalChildInst)

#ifdef HERMES_RUN_WASM
DEF_VALUE(CallIntrinsicInst, Instruction)
#endif

MARK_FIRST(TerminatorInst, Instruction)
TERMINATOR(BranchInst, TerminatorInst)
TERMINATOR(ReturnInst, TerminatorInst)
TERMINATOR(ThrowInst, TerminatorInst)
TERMINATOR(SwitchInst, TerminatorInst)
TERMINATOR(CondBranchInst, TerminatorInst)
TERMINATOR(GetPNamesInst, TerminatorInst)
TERMINATOR(GetNextPNameInst, TerminatorInst)
TERMINATOR(CheckHasInstanceInst, TerminatorInst)
TERMINATOR(TryStartInst, TerminatorInst)
TERMINATOR(CompareBranchInst, TerminatorInst)
TERMINATOR(SwitchImmInst, TerminatorInst)
TERMINATOR(SaveAndYieldInst, TerminatorInst)
MARK_LAST(TerminatorInst)

MARK_FIRST(BaseCallInst, Instruction)
DEF_VALUE(CallInst, BaseCallInst)
DEF_VALUE(ConstructInst, BaseCallInst)
DEF_VALUE(CallBuiltinInst, BaseCallInst)
#ifdef INCLUDE_HBC_BACKEND
DEF_VALUE(HBCConstructInst, BaseCallInst)
DEF_VALUE(HBCCallDirectInst, BaseCallInst)
DEF_VALUE(HBCCallNInst, BaseCallInst)
#endif
MARK_LAST(BaseCallInst)

DEF_VALUE(GetBuiltinClosureInst, Instruction)
DEF_VALUE(StartGeneratorInst, Instruction)
DEF_VALUE(ResumeGeneratorInst, Instruction)

// These are target dependent instructions:

#ifdef INCLUDE_HBC_BACKEND
DEF_VALUE(HBCGetGlobalObjectInst, Instruction)
DEF_VALUE(HBCCreateEnvironmentInst, Instruction)
DEF_VALUE(HBCGetThisNSInst, Instruction)
DEF_VALUE(HBCCreateThisInst, Instruction)

MARK_FIRST(HBCGetArgumentsPropByValInst, Instruction)
DEF_VALUE(HBCGetArgumentsPropByValLooseInst, HBCGetArgumentsPropByValInst)
DEF_VALUE(HBCGetArgumentsPropByValStrictInst, HBCGetArgumentsPropByValInst)
MARK_LAST(HBCGetArgumentsPropByValInst)

DEF_VALUE(HBCGetConstructedObjectInst, Instruction)
DEF_VALUE(HBCAllocObjectFromBufferInst, Instruction)
DEF_VALUE(HBCProfilePointInst, Instruction)
#endif

#undef INCLUDE_HBC_BACKEND

// Don't undef these if this file is being included in ValueKinds.def, since
// these macros are still used after the #include.
#ifndef INCLUDED_FROM_VALUEKINDS
#undef DEF_VALUE
#undef MARK_FIRST
#undef MARK_LAST
#undef TERMINATOR
#endif
